<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Understanding remotes # So, before we go about fixing our out of date branch, let&rsquo;s talk a little about another fundamental git concept: remotes
A remote in git is sort of like a pointer, but rather than point to a specific file or commit. It points git itself to a place where a git repo is stored.
This is typically a remote server. Something serving git over https or ssh is fairly common."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content="Understanding Remotes"><meta property="og:description" content="Understanding remotes # So, before we go about fixing our out of date branch, let&rsquo;s talk a little about another fundamental git concept: remotes
A remote in git is sort of like a pointer, but rather than point to a specific file or commit. It points git itself to a place where a git repo is stored.
This is typically a remote server. Something serving git over https or ssh is fairly common."><meta property="og:type" content="article"><meta property="og:url" content="https://guts-of-git.carson-anderson.com/docs/workshop/branching/understanding-remotes/"><meta property="article:section" content="docs"><title>Understanding Remotes | Guts of Git</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.7c6380fd01e728e94f281a8906785c4d072a6671885780a78ca39efe3c8ee6dd.css integrity="sha256-fGOA/QHnKOlPKBqJBnhcTQcqZnGIV4CnjKOe/jyO5t0=" crossorigin=anonymous><script defer src=/flexsearch.min.js></script>
<script defer src=/en.search.min.78166b9d46e23e0ea915cb6887a30b633e7bc4fad10c8b6b9f6fa532271c19ba.js integrity="sha256-eBZrnUbiPg6pFctoh6MLYz57xPrRDItrn2+lMiccGbo=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>Guts of Git</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=/docs/workshop/>Workshop</a><ul><li><a href=/docs/workshop/preamble/>Preamble</a></li><li><a href=/docs/workshop/fundamentals/>Git Fundamentals</a></li><li><input type=checkbox id=section-71509f844a91bb933c38e0973a47eee8 class=toggle checked>
<label for=section-71509f844a91bb933c38e0973a47eee8 class="flex justify-between"><a href=/docs/workshop/branching/>Git Branching</a></label><ul><li><a href=/docs/workshop/branching/understanding-remotes/ class=active>Understanding Remotes</a></li><li><a href=/docs/workshop/branching/update-with-merge/>Update With Merge</a></li><li><a href=/docs/workshop/branching/update-with-rebase/>Update With Rebase</a></li></ul></li></ul></li><li><a href=/docs/tips/>Bonus Git Tips</a><ul></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Understanding Remotes</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#understanding-remotes>Understanding <code>remotes</code></a><ul><li><a href=#a-note-about-local-remotes>A note about local <code>remotes</code></a></li><li><a href=#creating-the-baseline-repo>Creating the baseline repo</a></li><li><a href=#cloning-from-a-local-remote>Cloning from a local <code>remote</code></a></li><li><a href=#what-myclone-contains>What <code>~/myclone</code> contains</a><ul><li><a href=#explained>Explained</a><ul><li></li></ul></li></ul></li><li><a href=#update-the-remote>Update the remote</a><ul><li><a href=#meanwhile-in-myclone>Meanwhile in <code>~/myclone</code></a></li><li><a href=#fetch-latest>Fetch latest</a></li><li><a href=#merge-latest>Merge latest</a></li><li><a href=#what-about-git-pull>What about <code>git pull</code>?</a></li></ul></li></ul></li></ul></nav></aside></header><article class=markdown><h2 id=understanding-remotes>Understanding <code>remotes</code>
<a class=anchor href=#understanding-remotes>#</a></h2><p>So, before we go about fixing our out of date branch, let&rsquo;s talk a little about
another fundamental git concept: <code>remotes</code></p><p>A <code>remote</code> in git is sort of like a pointer, but rather than point to a specific
file or commit. It points git itself to a place where a git repo is stored.</p><p>This is typically a remote server. Something serving git over <code>https</code> or <code>ssh</code>
is fairly common.</p><p>For example, since this workshop comes from a repo hosted on GitHub it has two remotes
that are available:</p><pre tabindex=0><code>https://github.com/carsonoid/workshop-guts-of-git.git
</code></pre><pre tabindex=0><code>git@github.com:carsonoid/workshop-guts-of-git.git
</code></pre><p>Both of these are valid <code>remotes</code> for git.</p><a rel=noopener class="book-btn prevSegment">Back</a>
<a rel=noopener class="book-btn nextSegment" style=position:absolute;right:0>Next</a><div class=pagebreak></div><h3 id=a-note-about-local-remotes>A note about local <code>remotes</code>
<a class=anchor href=#a-note-about-local-remotes>#</a></h3><p>This may seem like an oxymoron, but yes, you can use a local git repository as a remote!</p><p>This is important to know because we will be utilizing this feature heavily when working through various git branching exercises.</p><a rel=noopener class="book-btn prevSegment">Back</a>
<a rel=noopener class="book-btn nextSegment" style=position:absolute;right:0>Next</a><div class=pagebreak></div><h3 id=creating-the-baseline-repo>Creating the baseline repo
<a class=anchor href=#creating-the-baseline-repo>#</a></h3><p>While you can use the repo from <a href=../fundamentals>Fundamentals</a>, here is a script to help you fully recreate the <code>~/gitrepo</code> our commands expect.</p><p>By using the baseline you will also have a local repo that exactly matches the diagrams in
the rest of this section.</p><blockquote><p>WARNING: This will DELETE everything from <code>~/gitrepo</code> and <code>~myclone</code> if either exists
Make a backup if you want to keep work from that repo.</p></blockquote><details><summary>Show Script</summary><div class=markdown-inner><p>You can simply click in the block below to copy the snippet and paste it into
a terminal.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cd ~
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>bash <span style=color:#e6db74>&lt;&lt;EOF
</span></span></span><span style=display:flex><span><span style=color:#e6db74>set -e
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>rm -rf ~/gitrepo ~/myclone
</span></span></span><span style=display:flex><span><span style=color:#e6db74>mkdir -p ~/gitrepo
</span></span></span><span style=display:flex><span><span style=color:#e6db74>cd ~/gitrepo
</span></span></span><span style=display:flex><span><span style=color:#e6db74>git init
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>echo &#34;# My Git Repository&#34; &gt; README.md
</span></span></span><span style=display:flex><span><span style=color:#e6db74>git add README.md
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>mkdir assets
</span></span></span><span style=display:flex><span><span style=color:#e6db74>curl -Lo assets/gopher.png \
</span></span></span><span style=display:flex><span><span style=color:#e6db74>   https://go.dev/doc/gopher/doc.png
</span></span></span><span style=display:flex><span><span style=color:#e6db74>git add assets
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>git commit -m &#34;Initial Add&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>touch api
</span></span></span><span style=display:flex><span><span style=color:#e6db74>echo &#34;## Has an API&#34; &gt;&gt; README.md
</span></span></span><span style=display:flex><span><span style=color:#e6db74>git add .
</span></span></span><span style=display:flex><span><span style=color:#e6db74>git commit -m &#34;feat: add api&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>git tag v0.0.1
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>git checkout -b topic
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>echo
</span></span></span><span style=display:flex><span><span style=color:#e6db74>echo &#34;======= Setup success! =======&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>echo
</span></span></span><span style=display:flex><span><span style=color:#e6db74>echo &#34;------- git log -------&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>git log
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span></code></pre></div></div></details><a rel=noopener class="book-btn prevSegment">Back</a>
<a rel=noopener class="book-btn nextSegment" style=position:absolute;right:0>Next</a><div class=pagebreak></div><h3 id=cloning-from-a-local-remote>Cloning from a local <code>remote</code>
<a class=anchor href=#cloning-from-a-local-remote>#</a></h3><p>To use a local repo as a remote, you can simply <code>git clone</code> it.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git clone ~/gitrepo ~/myclone
</span></span><span style=display:flex><span>cd ~/myclone
</span></span></code></pre></div><p>With that done, we can now examine and operate in <code>~/myclone</code> and do all the
same things that we would do if we used a full git server.</p><a rel=noopener class="book-btn prevSegment">Back</a>
<a rel=noopener class="book-btn nextSegment" style=position:absolute;right:0>Next</a><div class=pagebreak></div><h3 id=what-myclone-contains>What <code>~/myclone</code> contains
<a class=anchor href=#what-myclone-contains>#</a></h3><p>From here on out you we will be visualizing the state of our git repo using stacks.
Each stack represents a <code>head</code> of a git repo and it&rsquo;s starting commit (at the top) and
all the commits that came before. It really isn&rsquo;t much more than a <code>git log</code> made using boxes.</p><figure><img src=stack-diagrams/s2.png></figure><a rel=noopener class="book-btn prevSegment">Back</a>
<a rel=noopener class="book-btn nextSegment" style=position:absolute;right:0>Next</a><div class=pagebreak></div><h4 id=explained>Explained
<a class=anchor href=#explained>#</a></h4><figure><img src=stack-diagrams/s2.png></figure><p>You can see that we are concerned with 3 heads right now:</p><h6 id=our-local-main-head>Our local <code>main</code> head.
<a class=anchor href=#our-local-main-head>#</a></h6><p>The repo starting from the commit pointed to by the contents of <code>refs/heads/main</code></p><h6 id=the-head-at-originmain>The head at <code>origin/main</code>
<a class=anchor href=#the-head-at-originmain>#</a></h6><p>The repo starting from the commit pointed to by the contents of <code>refs/remotes/origin/main</code></p><details><summary>NOTE: Remote Refs and .git</summary><div class=markdown-inner><p><strong>You will likely not actually have a file at <code>.git/remotes/origin/main</code></strong></p><p>This is because git stores most remote heads in a compacted file.</p><p>Try using <code>ls-remote</code> instead</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git ls-remote -q --heads
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>63241bfa5a195149e8b3dd3ec934ef4f97f2fa52	refs/heads/main
</span></span><span style=display:flex><span>abd14ba38fd78839c2a6f24b50ee99f2f3934e7a	refs/heads/topic
</span></span></code></pre></div></div></details><h6 id=the-head-at-stored-in-our-remote>The head at stored in our remote
<a class=anchor href=#the-head-at-stored-in-our-remote>#</a></h6><p>The repo starting from the commit pointed to by the contents of <code>refs/heads/main</code>
as it currently exists in the remote.</p><a rel=noopener class="book-btn prevSegment">Back</a>
<a rel=noopener class="book-btn nextSegment" style=position:absolute;right:0>Next</a><div class=pagebreak></div><h3 id=update-the-remote>Update the remote
<a class=anchor href=#update-the-remote>#</a></h3><p>Let&rsquo;s simulate someone updating <code>main</code> on the remote.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cd ~/gitrepo
</span></span><span style=display:flex><span>git checkout main
</span></span><span style=display:flex><span>touch <span style=color:#e6db74>&#34;users&#34;</span>
</span></span><span style=display:flex><span>git add users
</span></span><span style=display:flex><span>git commit -m <span style=color:#e6db74>&#34;feat: add users&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>cd ~/myclone
</span></span></code></pre></div><p>The snippet above emulates another user pushing new code to <code>main</code>. It&rsquo;s the
local repo equivalent of someone else pushing new code to a remote server like GitHub.</p><a rel=noopener class="book-btn prevSegment">Back</a>
<a rel=noopener class="book-btn nextSegment" style=position:absolute;right:0>Next</a><div class=pagebreak></div><h4 id=meanwhile-in-myclone>Meanwhile in <code>~/myclone</code>
<a class=anchor href=#meanwhile-in-myclone>#</a></h4><p>You will notice in our diagram that while we just added a new commit to the remote
absolutely nothing has changed in our local repo. Both <code>main</code> and <code>origin/main</code> are unaware of the new commit.</p><figure><img src=stack-diagrams/s3.png></figure><a rel=noopener class="book-btn prevSegment">Back</a>
<a rel=noopener class="book-btn nextSegment" style=position:absolute;right:0>Next</a><div class=pagebreak></div><h4 id=fetch-latest>Fetch latest
<a class=anchor href=#fetch-latest>#</a></h4><p>But this is easy to fix! We can use <code>git fetch</code> to update our local repo based on the latest data
in the remote</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git fetch
</span></span></code></pre></div><p>Now you can see that our <code>origin/main</code> head now points to the the new commit.</p><figure><img src=stack-diagrams/s4.png></figure><a rel=noopener class="book-btn prevSegment">Back</a>
<a rel=noopener class="book-btn nextSegment" style=position:absolute;right:0>Next</a><div class=pagebreak></div><h4 id=merge-latest>Merge latest
<a class=anchor href=#merge-latest>#</a></h4><p>So, how do we ensure that our <code>main</code> ref starts at the same place as <code>origin/main</code>?</p><p>Easy! We use the same command we always use to combine to refs into one: <code>git merge</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git merge origin/main
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>Updating c5b4843..24f3e65
</span></span><span style=display:flex><span>Fast-forward
</span></span><span style=display:flex><span> users | 0
</span></span><span style=display:flex><span> 1 file changed, 0 insertions(+), 0 deletions(-)
</span></span><span style=display:flex><span> create mode 100644 users
</span></span></code></pre></div><p>Now you can see that our <code>origin/main</code> head now points to the the new commit.</p><figure><img src=stack-diagrams/s5.png></figure><a rel=noopener class="book-btn prevSegment">Back</a>
<a rel=noopener class="book-btn nextSegment" style=position:absolute;right:0>Next</a><div class=pagebreak></div><h4 id=what-about-git-pull>What about <code>git pull</code>?
<a class=anchor href=#what-about-git-pull>#</a></h4><p>It may seem sort of odd to go to all this trouble. And even more odd to use <code>git merge</code>
to update our <code>main</code> to match the latest main from our remote repo.</p><p>But the truth is that this is <strong>exactly</strong> what <code>git pull</code> does.</p><blockquote><p>You do not have to run the commands below, they will have no effect since our
<code>main</code> is already up to date</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git pull origin/main
</span></span></code></pre></div><p>Or, since our <code>main</code> is already set up to track <code>origin/main</code> we can skip the second
argument in our command. Git will assume we want to use the tracking head by default.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git pull
</span></span></code></pre></div><blockquote class="book-hint warning"><p>You could try this for yourself by following the exercise up to the <code>fetch</code> step and using
<code>git pull</code> instead.</p><p>You will end up with the same git log regardless of method</p></blockquote><a rel=noopener class="book-btn prevSegment">Next Section</a>
<a href=../update-with-merge class=book-btn style=position:absolute;right:0>Next Section</a><div class=pagebreak></div></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#understanding-remotes>Understanding <code>remotes</code></a><ul><li><a href=#a-note-about-local-remotes>A note about local <code>remotes</code></a></li><li><a href=#creating-the-baseline-repo>Creating the baseline repo</a></li><li><a href=#cloning-from-a-local-remote>Cloning from a local <code>remote</code></a></li><li><a href=#what-myclone-contains>What <code>~/myclone</code> contains</a><ul><li><a href=#explained>Explained</a><ul><li></li></ul></li></ul></li><li><a href=#update-the-remote>Update the remote</a><ul><li><a href=#meanwhile-in-myclone>Meanwhile in <code>~/myclone</code></a></li><li><a href=#fetch-latest>Fetch latest</a></li><li><a href=#merge-latest>Merge latest</a></li><li><a href=#what-about-git-pull>What about <code>git pull</code>?</a></li></ul></li></ul></li></ul></nav></div></aside></main><script>for(var j,code=document.querySelectorAll("code.language-bash"),parent,style,children,childStyle,nextSegment,prevSegment,i=0;i<code.length;i++)parent=code[i].parentElement,style=parent.getAttribute("style"),style==null&&(style=""),parent.setAttribute("style",style+";font-size: large;border: 1px solid #404239; filter: drop-shadow(0 0 0.5rem #404239);");code=document.querySelectorAll("code.language-txt");for(i=0;i<code.length;i++){parent=code[i].parentElement,style=parent.getAttribute("style"),style==null&&(style=""),parent.setAttribute("style",style+";background-color: #f5f5f5; color: #333"),children=code[i].querySelectorAll("[style]");for(j=0;j<children.length;j++)childStyle=children[j].getAttribute("style"),childStyle.indexOf("background-color")>-1&&(console.log("found background-color"),childStyle=childStyle+";background-color: #ddd; color: #333",children[j].setAttribute("style",childStyle))}nextSegment=document.getElementsByClassName("nextSegment");for(i=0;i<nextSegment.length;i++)nextSegment[i].addEventListener("click",function(){console.log("clicked");for(var e,t=this.nextElementSibling;t;){if(console.log(t),t.classList.contains("pagebreak"))for(e=t.nextElementSibling;e;){if(e.tagName=="H1"||e.tagName=="H2"||e.tagName=="H3"||e.tagName=="H4"||e.tagName=="H5"||e.tagName=="H6"){e.scrollIntoView(),window.location.hash=e.id;return}e=e.nextElementSibling}t=t.nextElementSibling}});prevSegment=document.getElementsByClassName("prevSegment");for(i=0;i<prevSegment.length;i++)prevSegment[i].addEventListener("click",function(){console.log("clicked");for(var e,t=this.previousElementSibling;t;){if(console.log(t),t.classList.contains("pagebreak"))for(e=t.previousElementSibling;e;){if(e.tagName=="H1"||e.tagName=="H2"||e.tagName=="H3"||e.tagName=="H4"||e.tagName=="H5"||e.tagName=="H6"){e.scrollIntoView(),window.location.hash=e.id;return}e=e.previousElementSibling}t=t.previousElementSibling}})</script></body></html>